# 二阶段提交

- [二阶段提交](#二阶段提交)
  - [特点](#特点)
  - [流程](#流程)
    - [提交事务请求](#提交事务请求)
    - [执行事务提交](#执行事务提交)
  - [缺点](#缺点)

## 特点

- 解决分布式事务中的一致性和原子性问题
- 先尝试再提交
- 事务处理分为投票和执行阶段

## 流程

### 提交事务请求

- 协调者发送事务请求
- 参与者执行事务并记录 undolog 和 redolog
- 协调者收集事务执行结果

### 执行事务提交

- 协调者根据收集的结果，发送提交事务或中断事务
- 参与者执行事务的提交或中断
- 协调者收集反馈

## 缺点

- 同步阻塞
- 协调者单点问题
- 代价高，一个参与者失败全部回滚
