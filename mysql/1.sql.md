# SQL 优化

- [SQL 优化](#sql-优化)
  - [SQL 执行过程](#sql-执行过程)
  - [问题定位](#问题定位)
  - [优化](#优化)
  - [SQL 注入](#sql-注入)

## SQL 执行过程

![SQL执行过程](./sql.png)

## 问题定位

- 慢查询日志
- explain 分析执行计划
- performance 指标查询

## 优化

- 表设计，避免数据冗余和重复计算
- 合理设计索引
- 分库分表，减少数据量，减小查询范围

## SQL 注入

- 用户参数中包含了 SQL 语句，修改了原 SQL 的意图
- 避免方法
  - 预编译，？号占位符
  - 正则表达式过滤参数
  - 过滤转义
